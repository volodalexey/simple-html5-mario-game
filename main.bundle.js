(()=>{"use strict";var e,t={7279:(e,t,i)=>{i.r(t)},1557:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderScene=t.manifest=void 0;const s=i(8687),o=i(5473);t.manifest={bundles:[{name:"bundle-1",assets:{spritesheet:"assets/spritesheets/spritesheet.json",background:"assets/images/background.png",hills:"assets/images/hills.png"}}]};class n extends s.Container{constructor(e){super(),this.barOptions={width:350,height:40,fillColor:34816,borderRadius:5,borderThick:5,borderColor:0},this.downloadProgress=e=>{this.loaderBarFill.width=(this.barOptions.width-2*this.barOptions.borderThick)*e},this.setup(),this.draw()}setup(){const e=new s.Graphics;this.addChild(e),this.loaderBarBorder=e;const t=new s.Graphics;this.addChild(t),this.loaderBarFill=t}draw(){const{loaderBarFill:e,loaderBarBorder:t,barOptions:i}=this;t.beginFill(i.borderColor),t.drawRoundedRect(0,0,i.width,i.height,i.borderRadius),t.endFill(),e.beginFill(i.fillColor),e.drawRoundedRect(i.borderThick,i.borderThick,i.width-2*i.borderThick,i.height-2*i.borderThick,i.borderRadius),e.endFill()}async initializeLoader(){await s.Assets.init({manifest:t.manifest}),await s.Assets.loadBundle(t.manifest.bundles.map((e=>e.name)),this.downloadProgress)}getAssets(){return{spritesheet:s.Assets.get("spritesheet"),backgroundTexture:s.Assets.get("background"),hillsTexture:s.Assets.get("hills")}}handleResize({viewWidth:e,viewHeight:t}){const i=e,s=t,n=this.width,r=this.height;if(i>=n&&s>=r){const e=i>n?(i-n)/2:0,t=s>r?(s-r)/2:0;(0,o.logLayout)(`Spacing aw=${i} tw=${n} ah=${s} th=${r}`),this.x=e,this.width=this.barOptions.width,this.y=t,this.height=this.barOptions.height}else{let e=1;r>=n?(e=s/r,e*n>i&&(e=i/n),(0,o.logLayout)(`By height (sc=${e})`)):(e=i/n,(0,o.logLayout)(`By width (sc=${e})`),e*r>s&&(e=s/r));const t=Math.floor(n*e),a=Math.floor(r*e),l=i>t?(i-t)/2:0,h=s>a?(s-a)/2:0;(0,o.logLayout)(`aw=${i} (ow=${t}) ah=${s} (oh=${a})`),this.x=l,this.width=t,this.y=h,this.height=a}(0,o.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}t.LoaderScene=n},1108:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const s=i(8687);class o extends s.Sprite{constructor({name:e,texture:t}){super(t),this.name=e}}t.Platform=o},3034:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Platforms=void 0;const s=i(8687),o=i(1108);class n extends s.Container{constructor(e){super(),this.setup(e)}setup({platformTexture:e,platformSmallTallTexture:t,bottom:i}){const s=new o.Platform({name:"1",texture:e});s.position.y=i-e.height,this.addChild(s);const n=new o.Platform({name:"2",texture:e});n.position.set(s.width,s.y-n.height),this.addChild(n);const r=new o.Platform({name:"3s",texture:t});r.position.set(n.x+n.width+200,i-t.height),this.addChild(r);const a=new o.Platform({name:"4s",texture:t});a.position.set(r.x+r.width+300,i-t.height-50),this.addChild(a);const l=new o.Platform({name:"5",texture:e});l.position.set(a.x+a.width+200,i-e.height-50),this.addChild(l);const h=new o.Platform({name:"6",texture:e});h.position.set(l.x+l.width+200,i-e.height-50),this.addChild(h);const d=new o.Platform({name:"7s",texture:t});d.position.set(h.x+h.width-t.width,h.y-t.height),this.addChild(d);const p=new o.Platform({name:"8",texture:e});p.position.set(d.x+d.width+500,i-e.height),this.addChild(p)}}t.Platforms=n},4778:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=t.PlayerAnimation=void 0;const s=i(8687),o=i(5473);var n;!function(e){e.idleLeft="idleLeft",e.idleRight="idleRight",e.runLeft="runLeft",e.runRight="runRight"}(n=t.PlayerAnimation||(t.PlayerAnimation={}));class r extends s.Container{constructor(e){super(),this.pointerXDown=null,this.pointerYDown=null,this.moveSpeed=8,this.jumpSpeed=20,this.velocity={vx:0,vy:0},this.idleAnimation=n.idleRight,this.settings={scale:.375,animationIdleSpeed:.2,animationRunSpeed:1,spritesBoxColorTL:959977,spritesBoxColorTR:10741301,spritesBoxColorBR:14753096,spritesBoxColorBL:15381256},this.setup(e),this.draw(e),this.switchAnimation(this.idleAnimation)}setup({textures:{idleLeftTexture:e,idleRightTexture:t,runLeftTexture:i,runRightTexture:o}}){const{settings:n}=this,r=new s.Graphics;this.addChild(r),this.playerBox=r;const a=new s.Container,l=new s.AnimatedSprite(e);l.animationSpeed=n.animationIdleSpeed,a.addChild(l),this.idleLeft=l;const h=new s.AnimatedSprite(t);h.animationSpeed=n.animationIdleSpeed,a.addChild(h),this.idleRight=h;const d=new s.AnimatedSprite(i);d.animationSpeed=n.animationRunSpeed,a.addChild(d),this.runLeft=d;const p=new s.AnimatedSprite(o);p.animationSpeed=n.animationRunSpeed,a.addChild(p),this.runRight=p,a.scale.set(n.scale),this.addChild(a)}isRunning(){return[n.runLeft,n.runRight].includes(this.animation)}getCenter(){return{centerX:this.x+this.width/2,centerY:this.y+this.height/2}}draw(e){const{centerX:t,centerY:i}=this.getCenter();this.playerBox.beginFill(this.settings.spritesBoxColorTL),this.playerBox.drawRect(0,0,t,i),this.playerBox.endFill(),this.playerBox.beginFill(this.settings.spritesBoxColorTR),this.playerBox.drawRect(t,0,t,i),this.playerBox.endFill(),this.playerBox.beginFill(this.settings.spritesBoxColorBL),this.playerBox.drawRect(0,i,t,i),this.playerBox.endFill(),this.playerBox.beginFill(this.settings.spritesBoxColorBR),this.playerBox.drawRect(t,i,t,i),this.playerBox.endFill(),this.playerBox.alpha=o.logPlayerBox.enabled?.5:0}stopAllAnimations(){[this.idleLeft,this.idleRight,this.runLeft,this.runRight].forEach((e=>{e.stop()}))}hideAllAnimations(){[this.idleLeft,this.idleRight,this.runLeft,this.runRight].forEach((e=>{e.visible=!1}))}setTopDirectionPressed(e){this.pointerYDown=e?-1:null}setLeftDirectionPressed(e){this.pointerXDown=e?-1:-1===this.pointerXDown?null:this.pointerXDown}setRightDirectionPressed(e){this.pointerXDown=e?1:1===this.pointerXDown?null:this.pointerXDown}isPointerDown(){return null!==this.pointerXDown&&null!==this.pointerYDown}handleMove(e,t,i){const{centerX:s}=this.getCenter();!0===e?(this.pointerXDown=t-s,this.pointerYDown=i-this.y):!1===e?(this.pointerXDown=null,this.pointerYDown=null):this.isPointerDown()&&((0,o.logPlayerMove)(`player-pointer-down x=${t} y=${t}`),this.pointerXDown=t-s,this.pointerYDown=i-this.y)}switchAnimation(e){switch(this.hideAllAnimations(),this.stopAllAnimations(),e){case n.idleLeft:this.idleLeft.play(),this.idleLeft.visible=!0;break;case n.idleRight:this.idleRight.play(),this.idleRight.visible=!0;break;case n.runLeft:this.runLeft.play(),this.runLeft.visible=!0,this.idleAnimation=n.idleLeft;break;case n.runRight:this.runRight.play(),this.runRight.visible=!0,this.idleAnimation=n.idleRight}this.animation=e}updateAnimation(){this.velocity.vx>0?this.switchAnimation(r.ANIMATION.runRight):this.velocity.vx<0?this.switchAnimation(r.ANIMATION.runLeft):this.switchAnimation(this.idleAnimation)}update(){this.updateAnimation()}reset(){this.stopAllAnimations(),this.velocity.vx=0,this.velocity.vy=0,this.pointerXDown=null,this.pointerYDown=null}}r.ANIMATION=n,t.Player=r},3110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SceneManager=void 0;const s=i(8687),o=i(5473);class n extends s.Container{init(){}handleUpdate(){}handleResize(){}}class r{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var e;const t=new s.Application({autoDensity:!0,resolution:null!==(e=window.devicePixelRatio)&&void 0!==e?e:1,width:r.width,height:r.height,resizeTo:window});document.body.appendChild(t.view),o.logApp.enabled&&((0,o.logApp)("window.app initialized!"),window.app=t),r.app=t,r.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",r.resizeDeBounce),r.app.ticker.add(r.updateHandler)}static async changeScene(e){r.app.stage.removeChild(r.currentScene),r.currentScene.destroy(),r.currentScene=e,r.app.stage.addChild(r.currentScene),r.resizeHandler()}static resizeDeBounce(){r.cancelScheduledResizeHandler(),r.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(r.resizeTimeoutId)}static scheduleResizeHandler(){r.resizeTimeoutId=setTimeout((()=>{r.cancelScheduledResizeHandler(),r.resizeHandler()}),r.resizeTimeout)}static resizeHandler(){r.currentScene.handleResize({viewWidth:r.width,viewHeight:r.height})}static updateHandler(){r.currentScene.handleUpdate(r.app.ticker.deltaMS)}}r.currentScene=new n,r.resizeTimeout=300,t.SceneManager=r},225:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SidescrollScene=void 0;const s=i(8687),o=i(5473),n=i(6879),r=i(4778),a=i(3034);class l extends s.Container{constructor(e){super(),this.gravity=.7,this.gameEnded=!1,this.winOffset=4500,this.moveLevelBoundsOptions={fill:3355392,left:100,right:400},this.handlePlayerStartMove=e=>{this.handlePlayerMove(!0,e)},this.handlePlayerKeepMove=e=>{this.handlePlayerMove(void 0,e)},this.handlePlayerStopMove=e=>{this.handlePlayerMove(!1,e)},this.handleKeyDown=e=>{switch((0,o.logKeydown)(`${e.code} ${e.key}`),e.code){case"KeyW":case"ArrowUp":case"Space":case"ShiftLeft":this.player.setTopDirectionPressed(!0);break;case"KeyA":case"ArrowLeft":this.player.setLeftDirectionPressed(!0);break;case"KeyD":case"ArrowRight":this.player.setRightDirectionPressed(!0)}},this.handleKeyUp=e=>{switch((0,o.logKeyup)(`${e.code} ${e.key}`),e.code){case"KeyW":case"ArrowUp":case"Space":case"ShiftLeft":this.player.setTopDirectionPressed(!1);break;case"KeyA":case"ArrowLeft":this.player.setLeftDirectionPressed(!1);break;case"KeyD":case"ArrowRight":this.player.setRightDirectionPressed(!1)}},this.startGame=()=>{this.startModal.visible=!1,this.gameEnded=!1,this.world.pivot.x=0,this.background.pivot.x=0,this.player.position.set(0,0)},this.viewWidth=e.viewWidth,this.viewHeight=e.viewHeight,this.setup(e),this.addEventLesteners()}setup({viewWidth:e,viewHeight:t,backgroundTexture:i,hillsTexture:l,platformTexture:h,platformSmallTallTexture:d,playerTextures:p}){const c=new s.Container,u=new s.Sprite(i);c.addChild(u),this.background=u;const w=new s.Sprite(l);w.position.y=u.height-w.height,u.addChild(w),this.platforms=new a.Platforms({platformTexture:h,platformSmallTallTexture:d,bottom:u.height}),c.addChild(this.platforms),this.player=new r.Player({textures:p}),c.addChild(this.player),this.addChild(c),this.world=c;const{moveLevelBoundsOptions:g}=this,y=new s.Graphics;y.alpha=o.logMoveLevelBounds.enabled?.5:0,y.beginFill(g.fill),y.drawRect(0,0,g.right-g.left,t),y.endFill(),y.position.x=100,this.addChild(y),this.moveLevelBounds=y,this.startModal=new n.StartModal({viewWidth:e,viewHeight:t}),this.startModal.visible=!1,this.addChild(this.startModal)}handleResize(e){this.viewWidth=e.viewWidth,this.viewHeight=e.viewHeight,this.resizeWorld(e),this.centerModal(e)}centerModal({viewWidth:e,viewHeight:t}){this.startModal.position.set(e/2-this.startModal.boxOptions.width/2,t/2-this.startModal.boxOptions.height/2)}resizeWorld({viewWidth:e,viewHeight:t}){(0,o.logLayout)(`bgw=${this.world.width} bgh=${this.world.height} vw=${e} vh=${t}`);const i=e,s=t,n=this.background.texture.width,r=this.background.texture.height,a=s/r;(0,o.logLayout)(`By height (sc=${a})`);const l=Math.floor(n*a),h=Math.floor(r*a),d=s>h?(s-h)/2:0;(0,o.logLayout)(`aw=${i} (ow=${l}) ah=${s} (oh=${h}) y=${d}`),this.world.width=l,this.world.y=d,this.world.height=h,(0,o.logLayout)(`y=${d} w=${this.width} h=${this.height}`)}handleUpdate(){if(this.gameEnded)return;const{position:e,velocity:t,jumpSpeed:i,moveSpeed:s,pointerXDown:n,pointerYDown:r}=this.player;"number"==typeof r&&r<0&&0===t.vy&&(t.vy=-i),"number"==typeof n?n<0?t.vx=-s:n>0&&(t.vx=s):t.vx=0;const{left:a,right:l,bottom:h,width:d,height:p}=this.player.getBounds();(0,o.logPlayerBounds)(`pl=${a} pr=${l} pw=${d} ph=${p}`),a+t.vx<this.background.x?(t.vx=0,e.x=this.background.x):l+t.vx>this.background.width?(t.vx=0,e.x=this.background.width-d):e.x+=t.vx;const c=this.player.position,u=c.x+this.player.width,w=c.y+this.player.height;this.platforms.children.some((i=>{const s=i.position,n=s.x+i.width;return u>=s.x&&c.x<=n&&w+t.vy>=s.y&&w<=s.y&&((0,o.logPlayerGravity)(`Floor bot=${h} vy=${t.vy} fl=${s.y}`),t.vy=0,e.y=s.y-this.player.height,!0)}))||((0,o.logPlayerGravity)(`Gravity bot=${h} vy=${t.vy}`),e.y+=t.vy,t.vy+=this.gravity);const g=this.player.toGlobal(this);(g.x+d>this.moveLevelBounds.x+this.moveLevelBounds.width&&t.vx>0||g.x<this.moveLevelBounds.x&&t.vx<0)&&(this.world.pivot.x+=t.vx),this.world.pivot.x<0&&(this.world.pivot.x=0),0!==this.world.pivot.x?this.background.pivot.x=-this.world.pivot.x+.5*this.world.pivot.x:this.background.pivot.x=0,h>this.background.height*this.world.scale.y?this.endGame(!1):(this.player.update(),this.player.x>this.winOffset&&this.endGame(!0))}addEventLesteners(){this.world.interactive=!0,this.world.on("pointerdown",this.handlePlayerStartMove),this.world.on("pointermove",this.handlePlayerKeepMove),this.world.on("pointerup",this.handlePlayerStopMove),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),this.startModal.on("click",this.startGame)}removeEventListeners(){this.world.interactive=!1,this.world.off("pointerdown",this.handlePlayerStartMove),this.world.off("pointermove",this.handlePlayerKeepMove),this.world.off("pointerup",this.handlePlayerStopMove),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),this.startModal.off("click",this.startGame)}handlePlayerMove(e,t){const i=this.world.toLocal(t.global);(0,o.logPointerEvent)(`${t.type} px=${i.x} py=${i.y}`),this.player.handleMove(e,i.x,i.y)}endGame(e){this.gameEnded=!0,this.player.reset(),this.startModal.visible=!0,this.startModal.reasonText.text=e?"You Win":"You Lose"}}t.SidescrollScene=l},6879:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartModal=void 0;const s=i(8687);class o extends s.Container{constructor(e){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.reasonTextOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.buttonOptions={top:120,left:50,width:200,height:50,fill:959977,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(e),this.draw(e),this.setupEventListeners()}setup(e){this.modalBox=new s.Graphics,this.addChild(this.modalBox);const{boxOptions:t,reasonTextOptions:i,buttonTextOptions:o}=this;this.reasonText=new s.Text("-",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.reasonText.anchor.set(.5,.5),this.reasonText.position.set(t.width/2,t.height/2+i.top),this.addChild(this.reasonText),this.button=new s.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new s.Text("Start Game",{fontSize:o.textSize,fill:o.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(t.width/2,t.height/2/2+o.top),this.button.addChild(this.buttonText)}draw(e){const{boxOptions:t,buttonOptions:i}=this;this.modalBox.beginFill(t.fill),this.modalBox.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(e=>{this.emit("click",e)}))}}t.StartModal=o},6752:(e,t,i)=>{i(7279);const s=i(3110),o=i(225),n=i(1557);(async function(){const e=document.querySelector(".ellipsis");null!=e&&(e.style.display="none"),await s.SceneManager.initialize();const t=new n.LoaderScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height});await s.SceneManager.changeScene(t),await t.initializeLoader();const{backgroundTexture:i,hillsTexture:r,spritesheet:{textures:a,animations:l}}=t.getAssets();await s.SceneManager.changeScene(new o.SidescrollScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height,backgroundTexture:i,hillsTexture:r,platformTexture:a["Platform.png"],platformSmallTallTexture:a["PlatformSmallTall.png"],playerTextures:{idleLeftTexture:l.PlayerStandLeft,idleRightTexture:l.PlayerStandRight,runLeftTexture:l.PlayerRunLeft,runRightTexture:l.PlayerRunRight}}))})().catch((e=>{var t;console.error(e);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(e)&&Boolean(e.message)?e.message:e);const s=document.querySelector(".error-stack");null!=s&&(s.classList.remove("hidden"),s.innerText=Boolean(e)&&Boolean(e.stack)?e.stack:"");const o=document.querySelector("canvas");null!=o&&(null===(t=o.parentElement)||void 0===t||t.removeChild(o))}))},5473:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logMoveLevelBounds=t.logPlayerMove=t.logPlayerGravity=t.logPlayerBounds=t.logPlayerBox=t.logKeyup=t.logKeydown=t.logPointerEvent=t.logLayout=t.logApp=void 0;const o=s(i(1227));t.logApp=(0,o.default)("mar-app"),t.logLayout=(0,o.default)("mar-layout"),t.logPointerEvent=(0,o.default)("mar-pointer-event"),t.logKeydown=(0,o.default)("mar-keydown"),t.logKeyup=(0,o.default)("mar-keydup"),t.logPlayerBox=(0,o.default)("mar-player-box"),t.logPlayerBounds=(0,o.default)("mar-player-bounds"),t.logPlayerGravity=(0,o.default)("mar-player-gravity"),t.logPlayerMove=(0,o.default)("mar-player-move"),t.logMoveLevelBounds=(0,o.default)("mar-move-level-bounds")}},i={};function s(e){var o=i[e];if(void 0!==o)return o.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=t,e=[],s.O=(t,i,o,n)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){for(var[i,o,n]=e[d],a=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((e=>s.O[e](i[l])))?i.splice(l--,1):(a=!1,n<r&&(r=n));if(a){e.splice(d--,1);var h=o();void 0!==h&&(t=h)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,o,n]},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var o,n,[r,a,l]=i,h=0;if(r.some((t=>0!==e[t]))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var d=l(s)}for(t&&t(i);h<r.length;h++)n=r[h],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},i=self.webpackChunksimple_html5_mario_game=self.webpackChunksimple_html5_mario_game||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=s.O(void 0,[736],(()=>s(6752)));o=s.O(o)})();